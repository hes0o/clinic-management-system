# ðŸ§  Task Guide: Bassam (Backend / Logic Core)

**Mission:** Ensure the Data is correct. You are the "Logic" guy.

## ðŸ’¾ Phase 1: Database Entities (Week 1)
1.  **Create Entities** in `Database/Entities/`:
    - `Patient.cs` (Id, Name, Phone, Age, History).
    - [Appointment.cs](file:///Users/hassanchawa/clinic-management-system/backend/HealthCenter.Domain/Entities/Appointment.cs) (Id, PatientId, Date, Status).
    - [QueueTicket.cs](file:///Users/hassanchawa/clinic-management-system/backend/HealthCenter.Domain/Entities/QueueTicket.cs) (Id, Number, Status).
2.  **Setup DbContext**:
    - Inside `Database/AppDbContext.cs`:
      ```csharp
      public DbSet<Patient> Patients { get; set; }
      protected override void OnConfiguring(DbContextOptionsBuilder options)
          => options.UseSqlite("Data Source=healthcenter.db");
      ```

## âš™ï¸ Phase 2: Services (Week 2)
1.  **Patient Service**:
    - Create `Features/Reception/PatientService.cs`.
    - Methods: `AddPatient()`, `SearchPatient(string name)`, `GetHistory()`.
2.  **Queue Service**:
    - Create `Features/Queue/QueueService.cs`.
    - Logic for `GenerateTicket()` -> Returns "A-101", "A-102".

## ðŸ“¡ Phase 3: Events (Week 3)
1.  **Real-time Updates**:
    - Create a C# Event `public event Action<int> OnQueueChanged;`.
    - When a ticket is generated, fire this event so Eylaf's screen updates automatically.

## ðŸ©» Phase 4: EMR Backend (Week 4)
1.  **File Management**:
    - Write logic to save uploaded X-Ray images (from File Picker) to a local folder `%AppData%/HealthCenter/Images`.
    - Store the *Path* in the database, not the image itself.
2.  **Template Logic**:
    - Create a JSON file `diagnoses.json` with 50 common templates.
    - Write a service to load these for Ela's dropdown.

## ðŸ§¹ Phase 5: Cleanup (Week 5)
1.  **Optimization**:
    - Check if Database Queries are fast. Add Indexes if needed (e.g., Index on `Patient.PhoneNumber`).
2.  **Cleanup**:
    - Remove any `Console.WriteLine` debugging code.
    - Ensure all Exceptions are caught and logged (via Ahmed's logger).

---
> **Tip**: You don't write XAML. You write pure C# logic that the UI talks to.
